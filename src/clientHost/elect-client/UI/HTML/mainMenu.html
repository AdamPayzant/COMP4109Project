<!DOCTYPE HTML>
<html>
    <head>
        <title>Hello World</title>

        <link rel="stylesheet" type="text/css" href="../CSS/mainMenu.css" />
        <link rel="stylesheet" type="text/css" href="../CSS/style.css" />

    </head>

    <body>

        <!-- Select a client that the user wants to chat with -->
        <div class="containerItem contactOuterGrid"> 
        <div class="contactInnerGrid">
        
            <!-- Contacts -->
            <div class="contactSelectionArea" id="contactSelectionArea">
            </div>
            
            <!-- Search Bar -->
            <input type="text" placeholder="Search Bar" id="contactSearch" style="grid-column: 1; grid-row: 2;" value="" oninput="populateContactList()"> </input>
            <select name="searchoptions" id="searchoptions" style="grid-column: 2; grid-row: 2;">
                <option value="name"> Name </option>
                <option value="public key"> Public Key </option>
            </select>

            <button type="button" style="grid-column: 4; grid-row: 2;"> One Time Connection </button>
            <button type="button" style="grid-column: 5; grid-row: 2;"> New Contact </button>
        
        </div></div>


        <!-- Display Connection information -->
        <div style="grid-column: 1; grid-row: 3;" id="area1" class="containerItem">
            
            <div style="display: grid; grid-template-columns: 70% 30%; grid-template-rows: 10% 60% 10%; justify-content: space-around; 
            align-content: space-around; padding: 15px; height: calc(100% - 30px); width: calc(100% - 30px);">
            
                <div style="grid-column: 1 / 3; grid-row: 1; " class="emptyBox" class="emptyBox"> 
                    <h3 style="margin: auto auto auto auto; height: 100%; width: 100%;">Profile</h1> 
                </div> 

                <div style="grid-column: 1 / 3; grid-row: 2; display: grid; grid-gap: 5px; grid-template-columns: 30% calc(70% - 5px); grid-auto-rows: auto;">
                    
                    <div style="grid-area: 1 / 1; " class="emptyBox">  
                        <div style="margin: auto auto auto auto; height: max-content; width: max-content;">Alias</div> 
                    </div> 
                    <input type="text" style="grid-area: 1 / 2; " class="emptyBox" value="12345678"/>

                    <div style="grid-area: 2 / 1; " class="emptyBox">  
                        <div style="margin: auto auto auto auto; height: max-content; width: max-content;">Public Key</div> 
                    </div> 
                    <input type="text" style="grid-area: 2 / 2; " class="emptyBox" value="12345678"/>

                </div>
                
                <button style="grid-column: 2 / 3; grid-row: 3;"> update </button>

            </div>
        </div>

        <!-- Display user identity-->
        <div style="grid-column: 2; grid-row: 3;" id = "area2" class="containerItem">
            
            <div style="display: grid; grid-template-columns: 70% 30%; grid-template-rows: 10% 60% 10%; justify-content: space-around; 
            align-content: space-around; padding: 15px; height: calc(100% - 30px); width: calc(100% - 30px);">
            
                <div style="grid-column: 1 / 3; grid-row: 1; " class="emptyBox"> 
                    <h3 style="margin: auto auto auto auto; height: max-content; width: max-content;">Host</h1> 
                </div> 

                <div style="grid-column: 1 / 3; grid-row: 2; display: grid; grid-gap: 5px; grid-template-columns: 30% calc(70% - 5px); grid-auto-rows: auto;">
                    
                    <div style="grid-area: 1 / 1; " class="emptyBox">  
                        <div style="margin: auto auto auto auto; height: max-content; width: max-content;">IP</div> 
                    </div> 
                    <div type="text" style="grid-area: 1 / 2; " class="emptyBox"> 12345678</div>

                    <div style="grid-area: 2 / 1; " class="emptyBox">  
                        <div style="margin: auto auto auto auto; height: max-content; width: max-content;"> Status </div> 
                    </div> 
                    <div type="text" style="grid-area: 2 / 2; " class="emptyBox"> 12345678</div>

                </div>
                
                <button style="grid-column: 2 / 3; grid-row: 3;"> disconnect </button>
        </div>
        </div>

        <!-- Settings Menu?-->
        <div style="grid-column: 3; grid-row: 3;" class="containerItem"> 

        <div style="display: grid; grid-row-gap: 5px; grid-template-columns: 45% calc(10% - 40px) 45%; 
        grid-template-rows: 20% 20% 20% 20%; padding: 15px; height: calc(100% - 30px); width: calc(100% - 30px);">

            <div style="grid-area: 1 / 1 / 2 / 4; " class="emptyBox""  class="textFeild"> 
                <h3 class="centeredText">Additional Functions</h3> 
            </div> 

            <button style="grid-area: 2 / 1;"> Delete Contact </button>
            <button style="grid-area: 2 / 3;"> </button>

            <button style="grid-area: 3 / 1;"> </button>
            <button style="grid-area: 3 / 3;"> </button>

            <button style="grid-area: 4 / 1;"> View Chat History </button>
            <button style="grid-area: 4 / 3;"> Visit Blocklist </button>

        </div>
        </div>

        <script> 
        

        const { ipcRenderer } = require("electron")
        
        function populateContactList(){

            //Default value for "Name"
            let searchType = 0

            if(document.getElementById('searchoptions').value == 'public key')
                searchType = 1

            let searchValue =  document.getElementById('contactSearch').value
            document.getElementById('contactSelectionArea').innerHTML = ipcRenderer.sendSync('provideContactList', searchValue, searchType)
        }

        function start(){
            populateContactList()
        }
        

        function requestChat(id){
            ipcRenderer.send('requestChat', id)
        }
        
        start()
        
        </script>

    </body>
</html>